æ­¤ç›®å½•å­˜æ”¾è¯¾å ‚ä½œä¸šï¼Œå¯ä»¥åœ¨æ­¤æ–‡ä»¶æ·»åŠ ä½œä½œä¸šæ€è·¯å’Œå¯¹é¢˜ç›®çš„çœ‹æ³•

#### React_Vite

##### React

[React](https://react.dev/) æ˜¯ä¸€ä¸ªç”¨äºæ„å»º**ç”¨æˆ·ç•Œé¢**çš„ `JavaScript` **åº“** 

å…¶ç‰¹ç‚¹ä¸»è¦æœ‰ï¼š

- **å£°æ˜å¼**

> åªéœ€è¦æè¿° UIï¼ˆHTMLï¼‰çœ‹èµ·æ¥æ˜¯ä»€ä¹ˆæ ·å­ï¼Œå°±åƒå†™ HTML ä¸€æ ·ç®€å•ï¼ŒReact å†…éƒ¨è´Ÿè´£æ¸²æŸ“ UIï¼Œå¹¶åœ¨æ•°æ®å˜åŒ–æ—¶è‡ªåŠ¨æ›´æ–° UIã€‚

- **ç»„ä»¶åŒ–**

> æŠŠå¤æ‚çš„é¡µé¢æ‹†åˆ†æˆä¸€ä¸ªä¸€ä¸ªçš„å•å…ƒï¼Œè¿™äº›ç»„æˆé¡µé¢çš„åŸºæœ¬å•å…ƒå°±æ˜¯ç»„ä»¶ï¼Œé€šè¿‡ç»„åˆã€å¤ç”¨ç»„ä»¶æ¥ç¼–å†™å¤æ‚ç•Œé¢çš„æ–¹å¼ï¼Œå°±æ˜¯ç»„ä»¶åŒ–ã€‚

- **ä¸€æ¬¡å­¦ä¹ ï¼Œéšå¤„ä½¿ç”¨**

> ä½¿ç”¨ React é™¤äº†å¯ä»¥å¼€å‘ Web åº”ç”¨ï¼Œè¿˜å¯ä»¥ä½¿ç”¨ React Native å¼€å‘åŸç”Ÿç§»åŠ¨åº”ç”¨ï¼Œç”šè‡³å¯ä»¥å¼€å‘ VRï¼ˆè™šæ‹Ÿç°å®ï¼‰åº”ç”¨ï¼ˆReact 360ï¼‰ã€‚

- **ç›¸æ¯”è¾ƒäº Vue**

> React å¼ºè°ƒå°½å¯èƒ½çš„åˆ©ç”¨ JS è¯­è¨€è‡ªèº«çš„èƒ½åŠ›æ¥ç¼–å†™ UIï¼Œè€Œä¸æ˜¯é€šè¿‡é€ è½®å­å¢å¼º HTML çš„åŠŸèƒ½ã€‚

##### Vite

[Vite](https://cn.vitejs.dev/)æ˜¯ä¸€ä¸ªç”± Evan Youåˆ›å»ºçš„ç°ä»£å‰ç«¯æ„å»ºå·¥å…·ã€‚åœ¨å¼€å‘æ¨¡å¼ä¸‹ï¼Œå®ƒé€šè¿‡åŸåœ°è½¬æ¢æ¥å¤„ç†æ¨¡å—ï¼Œè€Œä¸æ˜¯å…ˆæ„å»ºä¸€ä¸ªæ‰“åŒ…å¥½çš„é™æ€èµ„æºæ–‡ä»¶ã€‚è¿™æ„å‘³ç€å½“æ‚¨å¯åŠ¨ Vite æ—¶ï¼Œå®ƒå‡ ä¹å¯ä»¥ç«‹å³åŠ è½½æ‚¨çš„åº”ç”¨ï¼Œå¹¶ä¸”åœ¨ä¿å­˜æ–‡ä»¶æ—¶èƒ½å¤Ÿè¿…é€Ÿåœ°è¿›è¡Œå¢é‡ç¼–è¯‘å’Œçƒ­æ¨¡å—æ›¿æ¢ã€‚

å…³é”®ç‰¹æ€§ï¼š

- **å¿«é€Ÿå¯åŠ¨**ï¼š

  > åœ¨å¼€å‘ç¯å¢ƒä¸­ï¼ŒVite ä¸éœ€è¦é¢„å…ˆæ„å»ºæ•´ä¸ªé¡¹ç›®ï¼Œè€Œæ˜¯æŒ‰éœ€åŠ è½½å’Œè½¬æ¢æ–‡ä»¶ï¼Œå› æ­¤å¯åŠ¨é€Ÿåº¦éå¸¸å¿«ã€‚

- **çƒ­æ¨¡å—æ›¿æ¢ (HMR)**ï¼š

  > å½“æºä»£ç å‘ç”Ÿæ”¹å˜å¹¶ä¿å­˜æ—¶ï¼ŒVite å¯ä»¥åªæ›´æ–°å˜åŠ¨çš„éƒ¨åˆ†ï¼Œè€Œä¸éœ€è¦é‡æ–°åŠ è½½æ•´ä¸ªé¡µé¢ï¼Œè¿™å¤§å¤§æé«˜äº†å¼€å‘æ•ˆç‡ã€‚

- **æŒ‰éœ€ç¼–è¯‘**ï¼š

  > Vite åªç¼–è¯‘é‚£äº›ç¡®å®è¢«è¯·æ±‚çš„æ¨¡å—ï¼Œè€Œä¸æ˜¯ä¸€å¼€å§‹å°±ç¼–è¯‘æ•´ä¸ªé¡¹ç›®ã€‚

- **ç”Ÿäº§æ„å»ºä¼˜åŒ–**ï¼š

  > è™½ç„¶å¼€å‘æ¨¡å¼ä¸‹æ˜¯åŠ¨æ€ç¼–è¯‘ï¼Œä½†åœ¨ç”Ÿäº§ç¯å¢ƒä¸‹ï¼ŒVite ä¼šæ‰§è¡Œæ ‡å‡†çš„æ„å»ºè¿‡ç¨‹ï¼ŒåŒ…æ‹¬å‹ç¼©ã€æ ‘æ‘‡ç­‰ä¼˜åŒ–æ‰‹æ®µã€‚

- **TypeScript æ”¯æŒ**ï¼š

  > Vite åŸç”Ÿæ”¯æŒ TypeScriptï¼Œå¹¶ä¸”å¯ä»¥å¾ˆå¥½åœ°ä¸ TypeScript é¡¹ç›®é›†æˆ



#### Viteæ­å»ºReact_jsé¡¹ç›®

éœ€è¦ä¸‹è½½äº†nodeï¼Œå¹¶ä¸”ç‰ˆæœ¬éœ€è¦å¤§äº12.0.0ã€‚

##### ä½¿ç”¨viteå‘½ä»¤åˆ›å»ºé¡¹ç›®

 ```bash
# ä»¥ä¸‹ä¸¤ç§æ–¹å¼äºŒé€‰ä¸€
npm init vite
npm create vite@latest
 ```

æŒ‰ç…§å¼¹å‡ºçš„å†…å®¹è¾“å…¥é¡¹ç›®åç§°ã€é€‰æ‹©é¡¹ç›®æ¡†æ¶ï¼ˆReactï¼ŒVueç­‰ç­‰ï¼‰ä»¥åŠé€‰æ‹©å¼€å‘çš„è¯­è¨€ï¼ˆts,jsç­‰ï¼‰ï¼Œå®Œæˆé¡¹ç›®çš„åˆ›å»ºå·¥ä½œã€‚

##### å¯åŠ¨é¡¹ç›®

- è¿›å…¥é¡¹ç›®ï¼šcd demo
- å®‰è£…ä¾èµ–ï¼šnpm install
- å¯åŠ¨é¡¹ç›®ï¼šnpm run dev

**é‡åˆ°çš„é—®é¢˜**ï¼šä½¿ç”¨ `npm install` æ—¶é‡åˆ°æ— æ³•ä¸‹è½½ä¾èµ–ã€‚

**è§£å†³æ€è·¯**ï¼š

> 1. æ£€æŸ¥ç¬”è®°æœ¬æ˜¯å¦æ–­ç½‘
>
> 2. å¯èƒ½ä¸‹è½½çš„åŒ…åœ¨å›½å¤–ï¼Œå¯¼è‡´ä¸‹è½½å¤±è´¥ï¼Œæ›´æ¢npmæº
>
>    æŸ¥çœ‹å½“å‰npmçš„æºï¼š`npm config get registry`
>
>    æ›´æ¢ä¸ºè…¾è®¯äº‘ï¼š`npm config set registry https://mirrors.cloud.tencent.com/npm/`
>
>    æ¸…ç©ºä¸€ä¸‹npmç¼“å­˜ï¼š`npm cache clean --force`

å¯åŠ¨é¡¹ç›® ï¼Œæœ¬åœ°æ‰“å¼€ç½‘ç«™å°±èƒ½çœ‹è§ä¸€ä¸ªæ¸²æŸ“å¥½çš„ç•Œé¢ã€‚



#### äº†è§£jsx

##### jsx

JSX æ˜¯ JavaScript XML çš„ç®€å†™ï¼Œè¡¨ç¤ºå¯ä»¥åœ¨ JavaScript ä»£ç ä¸­å†™ XMLï¼ˆHTMLï¼‰ æ ¼å¼çš„ä»£ç ã€‚

**ä¼˜åŠ¿ï¼š**å£°æ˜å¼è¯­æ³•æ›´åŠ ç›´è§‚ï¼Œä¸ HTML ç»“æ„ç›¸åŒï¼Œé™ä½äº†å­¦ä¹ æˆæœ¬ï¼Œæé«˜äº†å¼€å‘æ•ˆç‡ï¼ŒJSX æ˜¯ React çš„æ ¸å¿ƒä¹‹ä¸€ã€‚å»äº†è§£ä¸€äº›å®ƒçš„ä½¿ç”¨ã€‚

##### åŸºæœ¬ä½¿ç”¨

> åˆ æ‰åˆšåˆšåˆ›å»ºå¥½çš„é¡¹ç›®srcä¸‹çš„å†…å®¹ï¼Œå¹¶æ–°å»ºæ–‡ä»¶main.jsxï¼Œåœ¨æ–‡ä»¶ä¸‹å­¦ä¹ jsxçš„ä¸€äº›ä½¿ç”¨ã€‚

```jsx
import React from "react";
import ReactDOM from "react-dom/client";

// jsxåˆ›å»ºreactå…ƒç´ 
const r = (
    <div className="wrap">
      <h1>Hello World</h1>
      <p>React</p>
    </div>
)
// å°†å…¶æ¸²æŸ“åˆ°é¡µé¢ä¸Š
ReactDOM.createRoot(document.getElementById("root")).render(r)
```

ä¿å­˜æ›´æ–°çš„å†…å®¹åï¼Œå†æ‰“å¼€ç½‘é¡µå°±å¯ä»¥çœ‹è§ä¸Šè¿°å†…å®¹

**ä¸€äº›æ³¨æ„ç‚¹**ï¼š

- å¿…é¡»æœ‰ 1 ä¸ªæ ¹èŠ‚ç‚¹ï¼Œæˆ–è€…è™šæ‹Ÿæ ¹èŠ‚ç‚¹ `<></>`ã€`<React.Fragment></React.Fragment>`ã€‚
- å±æ€§åä¸€èˆ¬æ˜¯é©¼å³°çš„å†™æ³•ä¸”ä¸èƒ½æ˜¯ JS ä¸­çš„å…³é”®å­—ï¼Œä¾‹å¦‚ class æ”¹æˆ classNameï¼Œlabel çš„ for å±æ€§æ”¹ä¸º `htmlFor`ï¼Œcolspan æ”¹ä¸º `colSpan`ã€‚
- å…ƒç´ è‹¥æ²¡æœ‰å­èŠ‚ç‚¹ï¼Œå¯ä»¥ä½¿ç”¨å•æ ‡ç­¾ï¼Œä½†ä¸€å®šè¦é—­åˆï¼Œä¾‹å¦‚ `<span/>`ã€‚
- [`React@16.14`](mailto:React@16.14) ä¹‹å‰éœ€è¦å…ˆå¼•å…¥ React æ‰èƒ½ä½¿ç”¨ JSXï¼ˆè¿™ä¸ªä¹Ÿå¥½ç†è§£ï¼Œå› ä¸º JSX æœ€åè¿˜æ˜¯è¦è¢«è½¬æˆ `React.createElement()` çš„å½¢å¼ï¼‰ã€‚
- æ¢è¡Œå»ºè®®ä½¿ç”¨ `()` è¿›è¡ŒåŒ…è£¹ï¼Œé˜²æ­¢æ¢è¡Œçš„æ—¶å€™[è‡ªåŠ¨æ’å…¥åˆ†å·](https://stackoverflow.com/questions/2846283/what-are-the-rules-for-javascripts-automatic-semicolon-insertion-asi)çš„ Bugã€‚

##### ä½¿ç”¨è¡¨è¾¾å¼

> å°†ä¸€äº›æ•°æ®æ’å…¥åˆ°é¡µé¢ä¸­ï¼Œå•å¤§æ‹¬å·ä¸­å¯ä»¥ä½¿ç”¨ä»»æ„jsçš„è¡¨è¾¾å¼ã€å‡½æ•°ã€æ•°ç»„å’Œå¯¹è±¡çš„å±æ€§ç­‰ï¼ˆé™¤äº†ç›´æ¥æ•´ä¸ªå¯¹è±¡ï¼‰

```jsx
// æ•°æ®ç±»å‹
let name = 'tom'
let age = 13
// å¯¹è±¡çš„å±æ€§
let car = {
    brand : "ç›èæ‹‰è’‚",
    price : 1200000,
}
// æ•°ç»„çš„ä¸€é¡¹ç”šè‡³æ•´ä¸ªæ•°ç»„
let arr = ["æå©¶", "ç‹å¦ˆ", "èµµå§¨"]
// è°ƒç”¨å‡½æ•°
let hi = () => "hi"

const r = (
    <div className="wrap">
      <h1 className="title">Hello World</h1>
      <p>React</p>
      <p>å§“å: { name }</p>
      <p>å¹´é¾„: { age }</p>
      <p>è½¦è¾†: { car.brand } , $ { car.price }</p>
      <p>ç®¡å®¶: { arr }</p>
      <p>æ‰“æ‹›å‘¼: { hi() }</p>
    </div>
);
ReactDOM.createRoot(document.getElementById("root")).render(r)
```

![72224274632](./assert/1722242746326.png)

##### åˆ—è¡¨æ¸²æŸ“

> åå°è¿”å›çš„æ•°æ®ä¸€èˆ¬jsonè§£ææˆä¸ºlistçš„æ•°æ®ï¼Œéœ€è¦å°†å…¶è£…å…¥åˆ°é¡µé¢ä¸Šã€‚å¯ä»¥ä½¿ç”¨ `map()` æ–¹æ³•æ¸²æŸ“ä¸€ç»„æ•°æ®ã€‚

```jsx
const list = [
    { id: 1, name: "Vue" },
    { id: 2, name: "React" },
    { id: 3, name: "Angular" },
]

const list1 = [
    { id: 1, name: "åä¸­ç§‘æŠ€å¤§å­¦", salary: 30000 },
    { id: 2, name: "æ­¦æ±‰å¤§å­¦", salary: 28888 },
    { id: 3, name: "æ­¦æ±‰ç†å·¥å¤§å­¦", salary: 27000 },
]

const r2 = list1.map((item) => (
    <li key={item.id}>
        <h3 className="title">å­¦æ ¡: { item.name }</h3>
        <p>å·¥èµ„: { item.salary }</p>
    </li>
))

const r1 = list.map((item) => <li key={item.id}>{item.name}</li>) 

const r = (
    <div className="wrap">
      <ul>{ r1 }</ul>
      <ul>{ r2 }</ul>
    </div>
);
ReactDOM.createRoot(document.getElementById("root")).render(r)
```

![72224319265](./assert/1722243192654.png)

**æ³¨æ„ç‚¹ï¼š**`å…³äº key`

- **ç‰¹ç‚¹ï¼š**key å€¼è¦ä¿è¯å”¯ä¸€ï¼Œå°½é‡é¿å…ä½¿ç”¨ç´¢å¼•å·ï¼Œkey åœ¨æœ€ç»ˆçš„ HTML ç»“æ„ä¸­æ˜¯çœ‹ä¸è§çš„ï¼›
- **ä½œç”¨ï¼š**React å†…éƒ¨ç”¨æ¥è¿›è¡Œ**æ€§èƒ½ä¼˜åŒ–**æ—¶ä½¿ç”¨çš„ï¼Œkey åœ¨æœ€ç»ˆçš„ HTML ç»“æ„ä¸­æ˜¯çœ‹ä¸è§çš„ï¼›
- **åŠ åœ¨å“ªé‡Œï¼š**`map()` éå†è°ï¼Œå°±æŠŠ key åŠ åœ¨è°ä¸Šã€‚

##### æ ·å¼çš„å¤„ç†

ä¸¤ç§æ–¹å¼ï¼šè¡Œå†…æ ·å¼å’ŒclassName

**è¡Œå†…æ ·å¼**

åœ¨styleå±æ€§ä¸­ä½¿ç”¨å¯¹è±¡å»æ·»åŠ è¡Œå†…æ ·å¼

```jsx
<div style={{ width: 200, height: 200, color: 'red' }}>React</div>
```

**æ³¨æ„ç‚¹ï¼š**

ä¸¤ä¸ª{{}}ï¼Œå¤–å±‚çš„{}è¡¨ç¤ºè¦å¼€å§‹jsè¯­å¥äº†ï¼Œé‡Œé¢çš„{}æŒ‡æ˜äº†æ˜¯ä¸€ä¸ªå¯¹è±¡ã€‚å†…å®¹æ˜¯CSSæ ·å¼ï¼Œæœ¬æ¥æ˜¯ç¬¦å·é“¾æ¥çš„å±æ€§åˆ™æ”¹æˆäº†å°é©¼å³°çš„å†™æ³•ï¼Œæ•°å€¼å¯ä¸å¸¦å•ä½ã€‚

**className**

éœ€è¦åœ¨cssæ–‡ä»¶ä¸­å†™å¥½æ ·å¼ï¼Œåœ¨`src`ä¸‹åˆ›å»º`index.css`æ–‡ä»¶ã€‚é€šè¿‡importå¼•å…¥`main.jsx`

`index.css`

```css
p {
    color: red;
}

.title {
    color: aquamarine;
    font-size: 18px;
}

.wrap {
    background-color: blue;
}
```

`main.jsx`

```jsx
import React from "react";
import ReactDOM from "react-dom/client";
import "./index.css"

let name = 'tom'
let age = 13
let car = {
    brand : "ç›èæ‹‰è’‚",
    price : 1200000,
}
let arr = ["æå©¶", "ç‹å¦ˆ", "èµµå§¨"]

let hi = () => "hi"

const list = [
    { id: 1, name: "Vue" },
    { id: 2, name: "React" },
    { id: 3, name: "Angular" },
]

const list1 = [
    { id: 1, name: "åä¸­ç§‘æŠ€å¤§å­¦", salary: 30000 },
    { id: 2, name: "æ­¦æ±‰å¤§å­¦", salary: 28888 },
    { id: 3, name: "æ­¦æ±‰ç†å·¥å¤§å­¦", salary: 27000 },
]

const r2 = list1.map((item) => (
    <li key={item.id}>
        <h3 className="title">å­¦æ ¡: { item.name }</h3>
        <p>å·¥èµ„: { item.salary }</p>
    </li>
));

const r1 = list.map((item) => <li key={item.id}>{item.name}</li>) 

const r = (
    <div className="wrap">
      <h1 className="title">Hello World</h1>
      <p>React</p>
      <p>å§“å: { name }</p>
      <p>å¹´é¾„: { age }</p>
      <p>è½¦è¾†: { car.brand } , $ { car.price }</p>
      <p>ç®¡å®¶: { arr }</p>
      <p>æ‰“æ‹›å‘¼: { hi() }</p>
      <ul>{ r1 }</ul>
      <ul>{ r2 }</ul>
    </div>
);
ReactDOM.createRoot(document.getElementById("root")).render(r)
```

![72224393140](./assert/1722243931403.png)



#### ç»„ä»¶åŸºç¡€

##### ä»‹ç»

> ç»„ä»¶å°±æ˜¯é¡µé¢ä¸­çš„ä¸€éƒ¨åˆ†ï¼Œæ˜¯ React çš„ä¸€ç­‰å…¬æ°‘ï¼Œä½¿ç”¨ React å°±æ˜¯åœ¨ç”¨ç»„ä»¶ï¼Œè€Œæ‰€è°“çš„ç»„ä»¶åŒ–å¼€å‘å°±æ˜¯é‡‡ç”¨åˆ†è€Œæ²»ä¹‹çš„æ€æƒ³æ¥ç®¡ç†ç¹æ‚çš„é¡µé¢é€»è¾‘ã€‚

**å…¶ç‰¹ç‚¹ï¼š**

ç‹¬ç«‹ã€å¯å¤ç”¨ã€å¯ç»„åˆã€‚

**åˆ†ç±»ï¼š**

> - åŠŸèƒ½ä½¿ç”¨ï¼šUI ç»„ä»¶ï¼ˆAntDï¼‰å’Œä¸šåŠ¡ç»„ä»¶ï¼ˆç•™è¨€æ¿ï¼‰ï¼›æ™®é€šç»„ä»¶ï¼ˆåœ¨ä¸€ä¸ªç»„ä»¶ä¸­ç›´æ¥ä½¿ç”¨çš„ç»„ä»¶ï¼‰å’Œè·¯ç”±ç»„ä»¶ï¼ˆé€šè¿‡è·¯ç”±è·³è½¬è®¿é—®åˆ°çš„ç»„ä»¶ï¼‰ï¼›
> - åˆ›å»ºæ–¹å¼ï¼šå‡½æ•°ç»„ä»¶å’Œç±»ç»„ä»¶ã€‚

##### å‡½æ•°å¼ç»„ä»¶

**æ­¥éª¤ï¼š**

1. > 1. å…ˆå®šä¹‰ï¼›
   >
   > 2. 1. å‡½æ•°åç§°**å¿…é¡»ä»¥å¤§å†™å­—æ¯å¼€å¤´**ï¼›
   >    2. **å¿…é¡»æœ‰è¿”å›å€¼** ï¼Œè¿”å›å€¼è¡¨ç¤ºè¯¥ç»„ä»¶çš„ç»“æ„ï¼Œå¦‚æœä¸æƒ³æ¸²æŸ“ä»»ä½•å†…å®¹ï¼Œå¯ä»¥ `return null`ã€‚
   >
   > 3. å†ä½¿ç”¨ã€‚
   >
   > 4. 1. `<å‡½æ•°å/>`ï¼Œå•æ ‡ç­¾é—­åˆï¼›
   >    2. `<å‡½æ•°å></å‡½æ•°å>`ï¼ŒåŒæ ‡ç­¾ã€‚

```jsx
import ReactDOM from "react-dom/client";

function Hello() {
  return <div>è¿™æ˜¯ç¬¬ä¸€ä¸ªå‡½æ•°ç»„ä»¶</div>;
}

// æŠŠå‡½æ•°çš„åå­—ä½œä¸ºæ ‡ç­¾åè¿›è¡Œæ¸²æŸ“ï¼Œå¯ä»¥ä½¿ç”¨å•é—­åˆï¼Œæˆ–åŒæ ‡ç­¾çš„å½¢å¼
ReactDOM.createRoot(document.getElementById("root")).render(<Hello />)
```

##### äº‹ä»¶ç»‘å®š

> **è¯­æ³•ï¼š**React äº‹ä»¶åé‡‡ç”¨é©¼å³°å‘½åæ³•ï¼Œæ¯”å¦‚ onClickã€onMouseEnter ç­‰ã€‚

```jsx
const App = () => {
    const handleClick = () => {
        console.log('Hello World')
    }
    return <button onClick={handleClick}>click</button>
}
```

é€šè¿‡å½¢å‚ `e` å¯ä»¥æ‹¿åˆ°äº‹ä»¶å¯¹è±¡ï¼Œä¾‹å¦‚ `e.target` å°±æ˜¯è§¦å‘äº‹ä»¶çš„é‚£ä¸ª DOM å…ƒç´ ã€‚

##### ç»„ä»¶çš„çŠ¶æ€

**ç‰¹ç‚¹ï¼š**çŠ¶æ€èƒ½è¢«æ”¹å˜ï¼Œæ”¹å˜äº†ä¹‹åè§†å›¾ä¼šæœ‰å¯¹åº”çš„å˜åŒ–ã€‚

**ä½œç”¨ï¼š**ä¿å­˜æ•°æ®ï¼›æ•°æ®å˜åŒ–å“åº”åˆ°è§†å›¾ï¼ˆReact åŒ…å†…éƒ¨çš„æ“ä½œï¼‰ã€‚

##### useStateäº†è§£

> ä¸ºå‡½æ•°ç»„ä»¶æä¾›çŠ¶æ€å’Œä¿®æ”¹çŠ¶æ€çš„æ–¹æ³•ã€‚

ä½¿ç”¨æ­¥éª¤ï¼šå¯¼å…¥useStateå‡½æ•°ï¼Œè°ƒç”¨å‡½æ•°å¹¶è®¾ç½®åˆå§‹å€¼ï¼Œæ ¹æ®è¿”å›å€¼å–å¾—çŠ¶æ€å’ŒçŠ¶æ€ä¿®æ”¹å‡½æ•°

`State.jsx`

```jsx
import React, { useState } from 'react';

function Counter() {
  // åˆå§‹åŒ–çŠ¶æ€å€¼ä¸º 0
  const [count, setCount] = useState(0);

  // å¢åŠ è®¡æ•°å™¨
  const increment = () => {
    setCount(count + 1);
  };

  // å‡å°‘è®¡æ•°å™¨
  const decrement = () => {
    setCount(count - 1);
  };

  return (
    <div>
      <p>Count: {count}</p>
      <button onClick={increment}>Increment</button>
      <button onClick={decrement}>Decrement</button>
    </div>
  );
}

export default Counter;
```

`main.jsx`

```jsx
import React from "react";
import ReactDOM from "react-dom/client";
import Counter from "./State.jsx"

ReactDOM.createRoot(document.getElementById("root")).render(<Counter />)
```

![72224570310](./assert/1722245703105.png)



#### ç»„ä»¶é€šä¿¡

> ç»„ä»¶é€šè®¯çš„ä¸‰ç§æ–¹å¼ï¼ˆçˆ¶å­ã€å­çˆ¶ã€å…„å¼Ÿï¼‰ä»¥åŠ Context å®ç°è·¨å±‚çº§é€šè®¯

##### æ¦‚å¿µ

**ä¸ºä»€ä¹ˆéœ€è¦ç»„ä»¶é€šè®¯ï¼Ÿ**

- ç»„ä»¶æ˜¯ç‹¬ç«‹ä¸”å°é—­çš„å•å…ƒï¼Œé»˜è®¤æƒ…å†µä¸‹ï¼Œåªèƒ½ä½¿ç”¨ç»„ä»¶è‡ªå·±çš„æ•°æ®ï¼›
- åœ¨ç»„ä»¶åŒ–è¿‡ç¨‹ä¸­ï¼Œæˆ‘ä»¬å°†ä¸€ä¸ªå®Œæ•´çš„åŠŸèƒ½æ‹†åˆ†æˆå¤šä¸ªç»„ä»¶ï¼Œä»¥æ›´å¥½çš„ç®¡ç†æ•´ä¸ªåº”ç”¨çš„åŠŸèƒ½ï¼›
- è€Œåœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­ï¼Œå¤šä¸ªç»„ä»¶ä¹‹é—´ä¸å¯é¿å…çš„è¦**ä¼ é€’æˆ–å…±äº«æŸäº›æ•°æ®**ï¼›
- ä¸ºäº†å®ç°è¿™äº›åŠŸèƒ½ï¼Œå°±éœ€è¦æ‰“ç ´ç»„ä»¶çš„ç‹¬ç«‹å°é—­æ€§ï¼Œè®©å…¶ä¸å¤–ç•Œæ²Ÿé€šï¼Œè¿™ä¸ªè¿‡ç¨‹å°±æ˜¯é€šè®¯ï¼›
- ç»„ä»¶é€šä¿¡å¸¸è§çš„æ–¹å¼æœ‰ï¼š**çˆ¶ä¼ å­ã€å­ä¼ çˆ¶ã€å…„å¼Ÿç›¸ä¼ ã€è·¨ç»„ä»¶é€šä¿¡**ç­‰ã€‚

##### çˆ¶ä¼ å­

1. çˆ¶ç»„ä»¶ï¼ˆä½¿ç”¨ç»„ä»¶çš„åœ°æ–¹ï¼‰é€šè¿‡è‡ªå®šä¹‰å±æ€§æä¾›æ•°æ®
2. å­ç»„ä»¶ï¼ˆå®šä¹‰ç»„ä»¶çš„åœ°æ–¹ï¼‰é€šè¿‡ props æ¥æ”¶ã€‚

**Tipsï¼š**

- Props æ˜¯åªè¯»çš„ï¼Œä¸èƒ½ä¿®æ”¹ï¼›

- å•å‘æ•°æ®æµï¼Œä¹Ÿå«åšï¼šè‡ªä¸Šè€Œä¸‹çš„æ•°æ®æµï¼›

- 1. å½“çˆ¶ç»„ä»¶ä¸­çš„æ•°æ®æ›´æ–°æ—¶ï¼Œå­ç»„ä»¶æ¥æ”¶åˆ°çš„æ•°æ®ä¹Ÿä¼šè‡ªåŠ¨æ›´æ–°ï¼›
  2. ä½†ä¸èƒ½åè¿‡æ¥ï¼Œä¾‹å¦‚å­ç»„ä»¶ç›´æ¥å»ä¿®æ”¹çˆ¶ç»„ä»¶çš„æ•°æ®ï¼›
  3. ç±»æ¯”ï¼šå°±åƒç€‘å¸ƒçš„æ°´ä¸€æ ·åªèƒ½ä»ä¸Šå¾€ä¸‹æµåŠ¨ï¼Œå¹¶ä¸”ï¼Œå½“ä¸Šæ¸¸çš„æ°´å˜æµ‘æµŠï¼Œä¸‹æ¸¸çš„æ°´ä¹Ÿä¼šå—åˆ°å½±å“ã€‚

- å¯ä»¥ç»™ç»„ä»¶ä¼ é€’ä»»æ„ç±»å‹çš„æ•°æ®ï¼Œä¾‹å¦‚æ•°å­—ã€å­—ç¬¦ä¸²ã€å¸ƒå°”ã€å¯¹è±¡ã€å‡½æ•°ã€JSX ç­‰ã€‚

`çˆ¶ç»„ä»¶Parent.jsx`

```jsx
import React, { useState } from 'react'
import Child1 from './Child1'

export default function Parent() {
  const [salary] = useState(100)

  return (
    <div>
      Parent: { salary }
      <Child1 salary={ salary }></Child1>
    </div>
  )
}
```

`å­ç»„ä»¶Child1.jsx`

```jsx
import React from 'react'

// ç›´æ¥è§£æProps 
export default function Child1({salary}) {
  return (
    <div>
      Child1:{ salary }
    </div>
  )
}
```

![72232662773](./assert/1722326627732.png)

å¯¹äºåˆ—è¡¨æ•°æ®åŒæ ·çš„å®ç°æ€è·¯ï¼šé€šè¿‡useStateå»è®¾ç½®ç»„ä»¶çš„æ•°æ® ==> å¾—åˆ°æ•°æ®å’Œä¿®æ”¹æ•°æ®çš„æ–¹æ³•ï¼Œä¾‹å¦‚ä¸‹é¢çš„ä¾‹å­ï¼šæ•°æ®éƒ½æ˜¯æ”¾åœ¨çˆ¶ç»„ä»¶ï¼Œé€šè¿‡çŠ¶æ€ä¼ é€’ç»™å­ç»„ä»¶ï¼Œæ•°æ®å˜åŒ–è§†å›¾ä¹Ÿä¼šè·Ÿç€å‘ç”Ÿå˜åŒ–ã€‚

`çˆ¶ç»„ä»¶Parent1.jsx`

```jsx
import React, { useState } from 'react'
import Child2 from './Child2'

export default function Parent1() {
    const [state] = useState({
        list:[
            {
              id: 1,
              name: "è¶…çº§å¥½åƒçš„æ£’æ£’ç³–",
              price: 18.8,
              info: "å¼€ä¸šå¤§é…¬å®¾ï¼Œå…¨åœº8æŠ˜",
            },
            {
              id: 2,
              name: "è¶…çº§å¥½åƒçš„å¤§é¸¡è…¿",
              price: 34.2,
              info: "å¼€ä¸šå¤§é…¬å®¾ï¼Œå…¨åœº8æŠ˜",
            },
            {
              id: 3,
              name: "è¶…çº§æ— æ•Œçš„å†°æ¿€å‡Œ",
              price: 14.2,
              info: "å¼€ä¸šå¤§é…¬å®¾ï¼Œå…¨åœº8æŠ˜",
            },
        ],
        age : 18,
    })
    return (
        <>
            <ul>
                { state.list.map( (item) => (
                    <Child2 key={ item.id } { ...item }/>
                ))
                }
            </ul>
            <div>age: { state.age }</div>
        </>
    )
}
```

`å­ç»„ä»¶Child2.jsx`

```jsx
import React from 'react'

export default function Child2({name,price,info}) {
  return (
    <div>
      <h3>åå­—ï¼š{ name }</h3>
      <p>ä»·æ ¼ï¼š{ price }</p>
      <p>{ info }</p>
    </div>
  )
}
```

##### å­ä¼ çˆ¶

ç°åœ¨æå‡ºä¸€ä¸ªéœ€æ±‚ï¼šä¸Šè¿°çš„èœå•ä»·æ ¼ï¼Œç»™å‡ºäº†ä¸€ä¸ªç ä»·çš„åŠŸèƒ½ï¼Œæ¯ç‚¹å‡»ä¸€ä¸‹ç ä»·ï¼Œèœå“çš„ä»·æ ¼ä¼šå‡å°‘ä¸€å®šé‡‘é¢ã€‚

**æ€è·¯ï¼š**ç”±äºæ˜¯å•å‘æ•°æ®æµï¼Œå› æ­¤ä¸èƒ½ç›´æ¥åœ¨å­ç»„ä»¶ä¸­æ›´æ”¹ä»·æ ¼ï¼Œéœ€è¦å­å‘çˆ¶ä¼ é€’ç ä»·çš„é‡‘é¢ï¼Œæ¥æ”¹å˜æ”¾åœ¨çˆ¶ç»„ä»¶çš„æ•°æ®ã€‚è¿›è€Œæ”¹å˜è§†å›¾ã€‚

**åšæ³•ï¼š**

1. çˆ¶ç»„ä»¶é€šè¿‡å±æ€§ä¼ é€’ä¸€ä¸ªå›è°ƒå‡½æ•°ï¼›
2. å­ç»„ä»¶è°ƒç”¨ä¼ é€’è¿‡æ¥çš„å›è°ƒå‡½æ•°ï¼Œå¹¶å°†è¦ä¼ é€’çš„æ•°æ®ä½œä¸ºå›è°ƒå‡½æ•°çš„å®å‚ï¼›
3. çˆ¶ç»„ä»¶åœ¨å›è°ƒå‡½æ•°ä¸­é€šè¿‡å½¢å‚æ¥æ”¶ä¼ é€’è¿‡æ¥çš„æ•°æ®å¹¶åšç›¸åº”æ“ä½œã€‚

`çˆ¶ç»„ä»¶Parent1.jsx`

```jsx
import React, { useState } from 'react'
import Child2 from './Child2'

export default function Parent1() {
    const [state,setState] = useState({
        list:[
            {
              id: 1,
              name: "è¶…çº§å¥½åƒçš„æ£’æ£’ç³–",
              price: 18.8,
              info: "å¼€ä¸šå¤§é…¬å®¾ï¼Œå…¨åœº8æŠ˜",
            },
            {
              id: 2,
              name: "è¶…çº§å¥½åƒçš„å¤§é¸¡è…¿",
              price: 34.2,
              info: "å¼€ä¸šå¤§é…¬å®¾ï¼Œå…¨åœº8æŠ˜",
            },
            {
              id: 3,
              name: "è¶…çº§æ— æ•Œçš„å†°æ¿€å‡Œ",
              price: 14.2,
              info: "å¼€ä¸šå¤§é…¬å®¾ï¼Œå…¨åœº8æŠ˜",
            },
        ],
        age : 18,
    })
    const handleClick = (id, downPrice) => {
        setState({
            ...state,
            list : state.list.map((item) => {
                if(item.id === id){
                    let newprice = (item.price - downPrice).toFixed(2)
                    if(newprice < 0) {
                        newprice = 0
                    }
                    item.price = newprice
                } 
                return { ...item }
            }),
        })
    }
    return (
        <>
            <ul>
                { state.list.map( (item) => (
                    <Child2 
                        key={ item.id } 
                        { ...item } 
                        handleClick={ (price) => handleClick(item.id,price) }
                    />
                ))
                }
            </ul>
            <div>age: {state.age}</div>
        </>
    )
}
```

`å­ç»„ä»¶Child2.jsx`

```jsx
import React from 'react'

export default function Child2({name, price, info, handleClick}) {
  return (
    <div>
      <h3>åå­—ï¼š{ name }</h3>
      <p>ä»·æ ¼ï¼š{ price }</p>
      <p>{ info }</p>
      <button onClick={() => handleClick(1)}>ç ä»·(-1)</button>
    </div>
  )
}
```

![72232657767](./assert/1722326577677.png)

##### å…„å¼Ÿç»„ä»¶çš„é€šä¿¡

åªå­¦è¿‡çˆ¶ä¸å­ï¼Œå› æ­¤å¼€å‘çš„æ—¶å€™æ€è€ƒå…„å¼Ÿç»„ä»¶çš„å…¬å…±çˆ¶ç»„ä»¶ï¼Œå°†å…„å¼Ÿç»„ä»¶é—´çš„é€šä¿¡è½¬æ¢ä¸ºäº†çˆ¶ä¸å­çš„é€šä¿¡ã€‚

å› æ­¤ä¸€ä¸ª **éœ€æ±‚éœ€è¦å®Œæˆï¼š**ç‚¹å‡» A ä¸­çš„æŒ‰é’®ï¼Œä¿®æ”¹ B ä¸­çš„æ•°æ® countã€‚

1. å‡†å¤‡ Aã€B å…„å¼Ÿç»„ä»¶ï¼›
2. æŠŠéœ€è¦æ“ä½œçš„ B ç»„ä»¶ä¸­çš„æ•°æ® count æå‡åˆ°å…¬å…±çš„çˆ¶ç»„ä»¶é‡Œé¢ï¼›
3. **çˆ¶ç»„ä»¶æä¾›æ•°æ®å’Œæ“ä½œæ•°æ®çš„æ–¹æ³•**ï¼›
4. æŠŠæ•°æ®ä¼ é€’ç»™ B ç»„ä»¶ï¼ŒæŠŠæ“ä½œæ•°æ®çš„æ–¹æ³•ä¼ é€’ç»™ A ç»„ä»¶ã€‚

`å…¬å…±çˆ¶äº²CommonParent.jsx`

```jsx
import React, { useState } from 'react'
import Brother1 from './Brother1'
import Brother2 from './Brother2'

export default function CommonParent() {
    const [state,setState] = useState(100)

    // åŠ å‡è¡€
    let upDownBoold = (blood) => {
        setState(state + blood)
    }

    return (
        <div>
            <Brother2 blood={state}></Brother2>
            <br></br>
            <Brother1 upDownBoold={upDownBoold}></Brother1>
            <hr></hr>
        </div>
    )
}
```

`å…„å¼ŸB Brother2.jsx`

```jsx
import React from 'react'

export default function Brother2({ blood }) {
  return (
    <div>
      è¡€é‡:{blood}
    </div>
  )
}
```

`å…„å¼ŸA  Brother1.jsx`

```jsx
import React from 'react'

export default function Brother1({ upDownBoold }) {
  return (
    <div>
        <button onClick={() => upDownBoold(2)}>ç‚¹å‡»(+2)</button>
        <button onClick={() => upDownBoold(-3)}>ç‚¹å‡»(-3)</button>
    </div>
  )
}
```

![72232651940](./assert/1722326519403.png)

##### Context

è¿œæˆ¿äº²æˆšå…³ç³»ï¼ˆä¹Ÿå°±æ˜¯ä¸¤ä¸ªç»„ä»¶ä¹‹é—´é—´éš”è¾ƒè¿œï¼‰ï¼Œå¯ä»¥ä½¿ç”¨ Contextã€‚

1. ç¥–å…ˆç»„ä»¶é€šè¿‡ `React.createContext()` åˆ›å»º Context å¹¶å¯¼å‡ºï¼›
2. ç¥–å…ˆç»„ä»¶é€šè¿‡ `<Context.Provider>` é…åˆ value å±æ€§æä¾›æ•°æ®ï¼›
3. åä»£ç»„ä»¶é€šè¿‡ `<Context.Consumer>` é…åˆå‡½æ•°è·å–æ•°æ®ï¼›
4. ä¼˜åŒ–ï¼šæå– `React.createContext()` åˆ°å•ç‹¬çš„æ–‡ä»¶é‡Œé¢ã€‚


#### Hooks åŸºç¡€

##### æ˜¯ä»€ä¹ˆ

- `Hooks`ï¼šé’©å­ã€é’©ä½ï¼Œæ˜¯ [`React@16.8`](mailto:React@16.8) æä¾›çš„æ–°åŠŸèƒ½ã€‚
- ä½œç”¨ï¼šä¸ºå‡½æ•°ç»„ä»¶æä¾›çŠ¶æ€ã€ç”Ÿå‘½å‘¨æœŸç­‰åŸæœ¬ class ç»„ä»¶ä¸­æ‰æœ‰çš„åŠŸèƒ½ï¼Œå¯ä»¥ç†è§£ä¸ºé€šè¿‡ Hooks ä¸ºå‡½æ•°å¼ç»„ä»¶é’©å…¥äº† class ç»„ä»¶çš„ç‰¹æ€§ã€‚
- [`React@16.8`](mailto:React@16.8) ä»¥å‰ï¼Œclass ç»„ä»¶ï¼ˆæä¾›çŠ¶æ€å’Œç”Ÿå‘½å‘¨æœŸï¼‰ + å‡½æ•°ç»„ä»¶ï¼ˆå±•ç¤ºå†…å®¹ï¼‰ã€‚
- [`React@16.8`](mailto:React@16.8) ä»¥åï¼Œclass ç»„ä»¶ï¼ˆæä¾›çŠ¶æ€å’Œç”Ÿå‘½å‘¨æœŸï¼‰ + å‡½æ•°ç»„ä»¶ï¼ˆå±•ç¤ºå†…å®¹ï¼‰ï¼ŒHooksï¼ˆæä¾›çŠ¶æ€å’Œç”Ÿå‘½å‘¨æœŸï¼‰ + å‡½æ•°ç»„ä»¶ï¼ˆå±•ç¤ºå†…å®¹ï¼‰ï¼Œä¹Ÿå¯ä»¥æ··ç”¨è¿™ä¸¤ç§æ–¹å¼ï¼Œå³éƒ¨åˆ†åŠŸèƒ½ç”¨ class ç»„ä»¶ï¼Œéƒ¨åˆ†åŠŸèƒ½ç”¨ Hooks + å‡½æ•°ç»„ä»¶ã€‚
- æ³¨æ„ï¼š**Hooks åªèƒ½åœ¨å‡½æ•°ç»„ä»¶ä¸­ä½¿ç”¨** ï¼Œè™½ç„¶æœ‰äº† Hooksï¼Œä½† [React å®˜æ–¹](https://zh-hans.reactjs.org/docs/hooks-intro.html)å¹¶æ²¡æœ‰è®¡åˆ’ä» React åº“ä¸­ç§»é™¤ classã€‚

##### useEffect

- ç±»æ¯”ï¼Œå¯¹äº 999 æ„Ÿå†’çµæ¥è¯´ï¼›

- 1. ä¸»ä½œç”¨ï¼šç”¨äºæ²»ç–—æ„Ÿå†’å¼•èµ·çš„å¤´ç—›ï¼Œå‘çƒ­ï¼Œé¼»å¡ï¼Œæµæ¶•ï¼Œå’½ç—›ç­‰ï¼›
  2. å‰¯ä½œç”¨ï¼šå¯è§å›°å€¦ã€å—œç¡ã€å£æ¸´ã€è™šå¼±æ„Ÿã€‚

- é‚£ç»„ä»¶æˆ–ä¸€èˆ¬å‡½æ•°çš„å‰¯ä½œç”¨æ˜¯ä»€ä¹ˆå‘¢ï¼Ÿ

- 1. ç»„ä»¶çš„å‰¯ä½œç”¨ï¼šå¯¹äº React ç»„ä»¶æ¥è¯´ï¼Œä¸»ä½œç”¨å°±æ˜¯æ ¹æ®æ•°æ®ï¼ˆstate/propsï¼‰**æ¸²æŸ“ UI** ï¼Œé™¤æ­¤ä¹‹å¤–éƒ½æ˜¯å‰¯ä½œç”¨ï¼Œæ¯”å¦‚æ‰‹åŠ¨ä¿®æ”¹ DOMã€æ•°æ®ï¼ˆAJAXï¼‰è¯·æ±‚ã€localStorage æ“ä½œç­‰ï¼›
  2. å‡½æ•°çš„å‰¯ä½œç”¨ï¼šå¦‚æœä¸€ä¸ªå‡½æ•°ä¿®æ”¹äº†å…¶å±€éƒ¨ç¯å¢ƒä¹‹å¤–çš„æ•°æ®ï¼Œé‚£ä¹ˆå®ƒå°±è¢«ç§°ä¸ºæœ‰å‰¯ä½œç”¨ã€‚

- å…³äº useEffectã€‚

  ä½œç”¨ï¼šå½“ä½ æƒ³è¦åœ¨å‡½æ•°ç»„ä»¶ä¸­å¤„ç†å‰¯ä½œç”¨ï¼ˆside effectï¼‰ï¼Œå°±è¦ä½¿ç”¨ useEffect äº†ã€‚

##### åŸºæœ¬ä½¿ç”¨

æå‡ºä¸€ä¸ªå°éœ€æ±‚ï¼šç‚¹å‡»æŒ‰é’®ï¼Œè®©æ•°å­—åŠ  1ï¼Œå¹¶æŠŠå˜åŒ–åçš„æ•°å­—å±•ç¤ºåœ¨ç½‘é¡µæ ‡é¢˜ä¸Šã€‚

**æ€è·¯ï¼š**

1. åˆå§‹åŒ–æ—¶æ¸²æŸ“æ•°æ®åˆ°ç½‘é¡µæ ‡é¢˜ä¸Šã€‚
2. å½“æ•°æ®å˜åŒ–çš„æ—¶å€™æŠŠå˜åŒ–åçš„æ•°æ®æ¸²æŸ“åˆ°ç½‘é¡µæ ‡é¢˜ä¸Šã€‚

```jsx
import React, { useEffect, useState } from 'react'

export default function App() {
  const [count, setCount] = useState(0)
  
  useEffect(() => {
    document.title = count
  })

  return (
    <div>
        <p>{count}</p>
        <button onClick={() => setCount(count + 1)}>+1</button>
    </div>
  )
}
```

**é—®é¢˜ï¼š**ç»„ä»¶ä¸­è¿˜æœ‰å…¶ä»–çŠ¶æ€ï¼Œå…¶ä»–çŠ¶æ€æ›´æ–°æ—¶ï¼Œåˆšåˆšçš„ effect å›è°ƒï¼ˆä¿®æ”¹æ ‡é¢˜çš„æ“ä½œï¼‰ä¹Ÿä¼šæ‰§è¡Œ

ä¼˜åŒ–ï¼š**å¦‚ä½•è·³è¿‡ä¸å¿…è¦çš„æ‰§è¡Œï¼Œåªæœ‰åœ¨ count å˜åŒ–æ—¶ï¼Œæ‰æ‰§è¡Œç›¸åº”çš„ effect** ã€‚

è§£å†³åŠæ³•ï¼šuseEffectç¬¬äºŒä¸ªå‚æ•°å¯ä»¥ä¼ ä¸€ä¸ªæ•°ç»„ï¼Œè¡¨ç¤ºåªæœ‰å½“æ•°ç»„ä¸­çš„é€‰é¡¹/ä¾èµ–é¡¹æ”¹å˜æ—¶ï¼Œæ‰ä¼šé‡æ–°æ‰§è¡Œè¯¥ effectã€‚

```jsx
import React, { useEffect, useState } from 'react'

export default function App() {
  const [count, setCount] = useState(0)
  const [age, setAge] = useState(18)
  
  useEffect(() => {
    document.title = count
  }, [count])

  return (
    <div>
        <p>{count}</p>
        <button onClick={() => setCount(count + 1)}>+1</button>
        <button onClick={() => setAge(age + 1)}>+1</button>
    </div>
  )
}
```

useEffectç¬¬äºŒä¸ªå‚æ•°ä¸åŒä¾èµ–é¡¹å†™æ³•çš„å«ä¹‰ï¼š

```
ä¸å†™ä¾èµ–é¡¹
	- åˆå§‹åŒ–çš„æ—¶å€™ä¼šæ‰§è¡Œ
	- ä»»ä½•çŠ¶æ€å‘ç”Ÿå˜åŒ–çš„æ—¶å€™ä¼šæ‰§è¡Œ
ä¾èµ–é¡¹æ˜¯ [count, age]
	- åˆå§‹åŒ–çš„æ—¶å€™ä¼šæ‰§è¡Œ
	- count å’Œ age çŠ¶æ€å‘ç”Ÿå˜åŒ–çš„æ—¶å€™ä¼šæ‰§è¡Œ
ä¾èµ–é¡¹æ˜¯ []
	- åˆå§‹åŒ–çš„æ—¶å€™ä¼šæ‰§è¡Œ
	- åœºæ™¯ï¼šåˆå§‹åŒ–çš„æ—¶å€™å‘è¯·æ±‚ã€ç»‘å®šäº‹ä»¶
```

**Tipsï¼š**

- å’Œ useState ä¸€æ ·ï¼Œä¸€ä¸ªç»„ä»¶ä¸­ä¹Ÿå¯ä»¥è°ƒç”¨å¤šæ¬¡ useEffectã€‚
- æ¨èï¼šä¸€ä¸ª useEffect åªå¤„ç†ä¸€ä¸ªåŠŸèƒ½ï¼Œæœ‰å¤šä¸ªåŠŸèƒ½æ—¶ï¼Œä½¿ç”¨å¤šæ¬¡ useEffectã€‚

##### Demo:å€’è®¡æ—¶

éœ€æ±‚ï¼š**å®Œæˆä¸€æ‰“å¼€é¡µé¢å°±è¿›è¡Œå€’è®¡æ—¶çš„æ•ˆæœã€‚**

é—®é¢˜ï¼šä¼šå‡ºç°é—­åŒ…é—®é¢˜ï¼ˆè‡ªè¡ŒæŸ¥é˜…ï¼‰ï¼Œä¸€èˆ¬æ˜¯å¤–éƒ¨çš„å˜é‡ç”±äºå†…éƒ¨å‡½æ•°å ç”¨å¯¼è‡´æ— æ³•é‡Šæ”¾æ‰ã€‚ä¸€ç›´æŒ‡å‘åˆå§‹çš„å€¼

```jsx
import React, { useEffect, useState } from 'react'

export default function App() {
  const [count, setCount] = useState(10)

  useEffect(() => {
    setInterval( () => setCount(count => count - 1), 1000)
  }, [])
  
  return (
    <div>
        <p>{count}</p>
    </div>
  )
}
```

#### Hookè¿›é˜¶

##### useEffectæ¸…é™¤å‰¯ä½œç”¨

- useEffect å¯ä»¥è¿”å›ä¸€ä¸ªå‡½æ•°ï¼Œè¿™ä¸ªå‡½æ•°ç§°ä¸ºæ¸…ç†å‡½æ•°ï¼Œåœ¨æ­¤å‡½æ•°å†…ç”¨æ¥æ‰§è¡Œæ¸…ç†ç›¸å…³çš„æ“ä½œï¼ˆä¾‹å¦‚äº‹ä»¶è§£ç»‘ã€æ¸…é™¤å®šæ—¶å™¨ç­‰ï¼‰ï¼›
- æ¸…ç†å‡½æ•°çš„æ‰§è¡Œæ—¶æœºï¼šä¸‹ä¸€æ¬¡ å‰¯ä½œç”¨å›è°ƒå‡½æ•°è°ƒç”¨æ—¶ä»¥åŠç»„ä»¶å¸è½½æ—¶ï¼›
- å»ºè®®ï¼šä¸€ä¸ª useEffect åªç”¨æ¥å¤„ç†ä¸€ä¸ªåŠŸèƒ½ï¼Œæœ‰å¤šä¸ªåŠŸèƒ½æ—¶ï¼Œå¯ä»¥ä½¿ç”¨å¤šä¸ª useEffectã€‚

**æ¼”ç¤ºï¼š**ç”¨ä¸€ä¸ªæŒ‰é’®æ¥æ¶ˆé™¤é¡µé¢çš„å€’è®¡æ—¶æ•ˆæœï¼Œæ¶‰åŠåˆ°å€’è®¡æ—¶ç»„ä»¶çš„é”€æ¯è¿‡ç¨‹ï¼Œä¼šç”¨åˆ°useEffectçš„è¿”å›å‡½æ•°ã€‚

`APPç»„ä»¶App.jsx`

```jsx
import React, { useState } from 'react'
import Useeffect from './Components/Useeffect'

export default function App() {
  const [state,setState] = useState(true)

  return (
    <div>
      { state && <Useeffect></Useeffect>}
      <button onClick={() => setState(!state)}>é”€æ¯/åˆ›å»ºå€’è®¡æ—¶</button>
    </div>
  )
}
```

`Useeffect.jsx`

```jsx
import React, { useEffect, useState } from 'react'

export default function Useeffect() {
    const [count, setCount] = useState(10)

    useEffect(() => {
        const timer = setInterval( () => {
            setCount(count => count - 1)
            console.log(111);
        }, 1000)
        return () => {
            clearInterval(timer)
        }
    }, [])

    return (
        <div>
        	<p>{count}</p>
        </div>
    )
}
```

##### è‡ªå®šä¹‰hook

**å¼•å…¥Demoï¼š**è·Ÿéšé¼ æ ‡ç§»åŠ¨çš„å¤´åƒ

**æ€è·¯ï¼š**

1. é€šè¿‡ useState æä¾›çŠ¶æ€ï¼›
2. é€šè¿‡ useEffect ç»™ document æ³¨å†Œé¼ æ ‡ç§»åŠ¨äº‹ä»¶ï¼›
3. åœ¨äº‹ä»¶å›è°ƒé‡Œé¢ä¿®æ”¹çŠ¶æ€ä¸ºé¼ æ ‡çš„åæ ‡ï¼›
4. ç»„ä»¶é”€æ¯çš„æ—¶å€™è®°å¾—æ¸…ç†å‰¯ä½œç”¨ï¼ˆè§£ç»‘äº‹ä»¶ï¼‰ã€‚

`App.jsx`

```jsx
import React, { useState } from 'react'
import Mousemove from './Components/Mousemove'

export default function App() {
  return (
    <div>
      <Mousemove></Mousemove>
    </div>
  )
}
```

`Mousemove.jsx`

```jsx
import React, { useEffect, useState } from 'react'
import vite from '../../public/vite.svg' 
 
export default function Mousemove() {
    const [pos,setPos] = useState({
        x:0,
        y:0,
    })
    useEffect( () => {
        const move = (e) => {
            const { clientX, clientY } = e;
            setPos({
                x : clientX,
                y : clientY,
            })
        }
        document.addEventListener('mousemove', move)
        
        return () => {
            document.removeEventListener('mousemove', move)
        }
    },[])
    return (
        <div>
        <img src={vite} style={ { position:"absolute", left: pos.x, top: pos.y } }></img>
        </div>
    )
}
```

**è‡ªå®šä¹‰hook**

ç°åœ¨æˆ‘æƒ³åœ¨å…¶ä»–ç»„ä»¶é‡Œè·å¾—è¿™ä¸ªé¼ æ ‡çš„ä½ç½®ï¼Œå†æ¥å†™ä¸€æ®µè¿™ä¸ªä»£ç å—ï¼Ÿæ€ä¹ˆå°†å…¶å°è£…å¤ç”¨èµ·æ¥ï¼Ÿ

ç”¨åˆ°äº†è‡ªå®šä¹‰hookï¼š

- ç›®çš„ï¼šå¤ç”¨çŠ¶æ€é€»è¾‘ï¼›
- è‡ªå®šä¹‰ Hook æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œè§„å®šå‡½æ•°åç§°å¿…é¡»ä»¥ use å¼€å¤´ï¼Œæ ¼å¼æ˜¯ useXxxï¼ŒReact å†…éƒ¨ä¼šæ®æ­¤æ¥åŒºåˆ†æ˜¯å¦æ˜¯ä¸€ä¸ª Hookï¼›
- è‡ªå®šä¹‰ Hook åªèƒ½åœ¨å‡½æ•°ç»„ä»¶æˆ–å…¶ä»–è‡ªå®šä¹‰ Hook ä¸­ä½¿ç”¨ï¼Œå¦åˆ™ï¼Œä¼šæŠ¥é”™ï¼

`mousepos.jsx`

```jsx
import { useEffect, useState } from 'react'

export default function useMousepos() {
    const [pos,setPos] = useState({
        x:0,
        y:0,
    })
    useEffect( () => {
        const move = (e) => {
            const { clientX, clientY } = e;
            setPos({
                x : clientX,
                y : clientY,
            })
        }
        document.addEventListener('mousemove', move)
        
        return () => {
            document.removeEventListener('mousemove', move)
        }
    },[])
  return pos
}
```

Mousemove.jsx

```jsx
import React from 'react'
import vite from '../../public/vite.svg' 
import useMousepos from '../Hooks/mousepos'
 
export default function Mousemove() {
    const pos = useMousepos()
    return (
        <div>
        <img src={vite} style={ { position:"absolute", left: pos.x, top: pos.y } }></img>
        </div>
    )
}
```

##### useRef æ“ä½œ DOM

- å‚æ•°ï¼šåœ¨è·å– DOM æ—¶ï¼Œä¸€èˆ¬éƒ½è®¾ç½®ä¸º nullï¼›
- è¿”å›å€¼ï¼šè¿”å›ä¸€ä¸ªå¸¦æœ‰ current å±æ€§çš„å¯¹è±¡ï¼Œé€šè¿‡è¯¥å¯¹è±¡å°±å¯ä»¥å¾—åˆ° DOM å¯¹è±¡æˆ–ç±»ç»„ä»¶å®ä¾‹ã€‚

**åŸºæœ¬ä½¿ç”¨ï¼š**

â€‹	ä½¿ç”¨ useRef åˆ›å»ºä¸€ä¸ªæœ‰ current å±æ€§çš„ ref å¯¹è±¡ï¼Œ{ current: null }ã€‚

```jsx
const xxxRef = useRef(null)
```

â€‹	é€šè¿‡ DOM çš„ ref å±æ€§å’Œä¸Šé¢åˆ›å»ºçš„å¯¹è±¡è¿›è¡Œå…³è”ã€‚

```jsx
<div ref={xxxRef}></div>
```

â€‹	é€šè¿‡ xxxRef.current å°±å¯ä»¥è®¿é—®åˆ°å¯¹åº”çš„ DOM å•¦ã€‚

```jsx
import React, { useRef } from "react";

const App = () => {
  const inputRef = useRef(null);
  const add = () => {
    console.log(inputRef.current.value);
  };
  return (
    <section>
      <input placeholder="è¯·è¾“å…¥å†…å®¹" ref={inputRef} />
      <button onClick={add}>æ·»åŠ </button>
    </section>
  );
};

export default App;
```

> useRef æ¯æ¬¡éƒ½ä¼šè¿”å›ç›¸åŒçš„å¼•ç”¨ï¼Œè€Œ createRef æ¯æ¬¡æ¸²æŸ“éƒ½ä¼šè¿”å›ä¸€ä¸ªæ–°çš„å¼•ç”¨ã€‚

#### Redux

##### 1ã€ ä¼ ç»ŸRedux

å®ƒæ˜¯ä¸€ä¸ªå…¨å±€çŠ¶æ€ç®¡ç†çš„jsåº“ã€‚

a. é›†ä¸­å¼å­˜å‚¨å’Œç®¡ç†åº”ç”¨çš„çŠ¶æ€ ï¼Œå¤„ç†ç»„ä»¶é€šè®¯é—®é¢˜æ—¶ï¼Œæ— è§†ç»„ä»¶ä¹‹é—´çš„å±‚çº§å…³ç³»ï¼›
b. ç®€åŒ–å¤æ‚åº”ç”¨ä¸­çš„æ•°æ®ä¼ é€’é—®é¢˜ ï¼Œæ•°æ®æµæ¸…æ™°ï¼Œæ˜“äºå®šä½ Bugã€‚

**æ ¸å¿ƒæ¦‚å¿µ**

ğŸŒ³ ä¸ºäº†è®©ä»£ç å„éƒ¨åˆ†èŒè´£æ¸…æ™°ã€æ˜ç¡®ï¼ŒRedux æå‡ºä¸‰ä¸ªæ ¸å¿ƒæ¦‚å¿µï¼Œéœ€è¦æˆ‘ä»¬å†™ä»£ç çš„æ—¶å€™éµå®ˆï¼š

- actionï¼ˆåŠ¨ä½œï¼‰ï¼šæè¿°è¦åšçš„äº‹æƒ…ï¼ˆè¦å¹²å•¥ï¼‰ï¼›
- reducerï¼ˆå‡½æ•°ï¼‰ï¼šæ›´æ–°çŠ¶æ€ï¼ˆæ€ä¹ˆå¹²ï¼‰ï¼›
- storeï¼ˆä»“åº“ï¼‰ï¼šæ•´åˆ action å’Œ reducerï¼ˆè°æ¥æŒ‡æŒ¥ï¼‰ã€‚

ğŸš€ é€šè¿‡ä¾‹å­æ¥ç†è§£ä¸‰ä¸ªæ ¸å¿ƒæ¦‚å¿µ:

- actionï¼šç›¸å½“äºå…¬å¸é‡Œé¢è¦åšçš„äº‹æƒ…ï¼Œæ¯”å¦‚æ‰“æ‰«å«ç”Ÿè¿™ä¸ªäº‹ç­‰ï¼›
- reducerï¼šç›¸å½“äºå…¬å¸çš„å‘˜å·¥ï¼Œè´Ÿè´£æ‰§è¡Œï¼›
- storeï¼šç›¸å½“äºå…¬å¸çš„è€æ¿ï¼›

**æµç¨‹**
è€æ¿ï¼ˆstoreï¼‰åˆ†é…ï¼ˆdispatchï¼‰è¦åšçš„äº‹æƒ…ï¼ˆactionï¼‰ç»™å‘˜å·¥ï¼ˆreducerï¼‰ï¼Œå‘˜å·¥å¹²å®Œæ´»æŠŠç»“æœäº¤ç»™è€æ¿ã€‚åœ¨è§†å›¾å½“ä¸­ï¼Œé€šè¿‡ store dispatch ä¸€ä¸ª actionï¼Œreducer ä¼šè‡ªåŠ¨æ”¶åˆ°é€šçŸ¥æ¥æ›´æ–° stateï¼Œstate ä¸€æ—¦å˜åŒ–ï¼Œè¯´æœ‰ä½¿ç”¨ state çš„è§†å›¾è‡ªç„¶å°±å˜äº†ã€‚

**Action**

ğŸ¤” action ç”¨æ¥æè¿°è¦åšçš„äº‹æƒ…ï¼Œé¡¹ç›®ä¸­çš„æ¯ä¸€ä¸ªåŠŸèƒ½éƒ½æ˜¯ä¸€ä¸ª actionï¼Œæ¯”å¦‚ï¼š

- è®¡æ•°å™¨æ¡ˆä¾‹ï¼šè®¡æ•°å™¨åŠ  1ã€å‡ 1ï¼›
- todomvc æ¡ˆä¾‹ï¼šæ·»åŠ ä»»åŠ¡ã€åˆ é™¤ä»»åŠ¡ç­‰ï¼›
- é¡¹ç›®ï¼šç™»å½•ï¼Œé€€å‡ºç­‰ã€‚

ğŸŒ³ ç‰¹ç‚¹ï¼š

- åªæè¿°åšä»€ä¹ˆï¼›
- æœ¬è´¨ä¸Šå°±æ˜¯ä¸€ä¸ª JS å¯¹è±¡ï¼Œå¿…é¡»å¸¦æœ‰ type å±æ€§ï¼Œç”¨äºåŒºåˆ†åŠ¨ä½œçš„ç±»å‹ï¼›
- å¯ä»¥é€šè¿‡ payload æºå¸¦é¢å¤–çš„æ•°æ®ã€‚

```jsx
{ typeï¼š 'increment' }

// payload: å‚æ•°
{ typeï¼š 'decrement', payloadï¼š 2 }

{ type: 'addTodo', payload: 'åƒé¥­' }
{ type: 'addTodo', payload: 'ç¡è§‰' }
{ type: 'removeTodo', payload: 3 }
```

**é—®é¢˜ï¼š**ç›´æ¥ä½¿ç”¨å¯¹è±¡æ¥åˆ›å»º action ä¸çµæ´»ï¼Œå‚æ•°å†™æ­»äº†?
ğŸ‰ è§£å†³ï¼šå¯ä»¥ä½¿ç”¨å‡½æ•°æ¥åˆ›å»º actionï¼Œé€šè¿‡ä¼ å‚æŠŠä¸ä¸€æ ·çš„æ•°æ®ä¼ é€’è¿‡å»å°±å¥½äº†ï¼Œæˆ‘ä»¬æŠŠè¿™ä¸ªåˆ›å»º action çš„å‡½æ•°å«åš actionCreatorã€‚
ğŸŒ³ è¿”å›å€¼ï¼šè¿”å›ä¸€ä¸ª action å¯¹è±¡ã€‚
ğŸš€ å¥½å¤„ï¼šä»£ç æ›´åŠ ç®€æ´ï¼Œå®¹æ˜“å¤ç”¨ã€‚

```jsx
export const increment = (payload) => ({
  type: 'INCREMENT',
  payload,
})

export const decrement = (payload) => ({
  type: 'DECREMENT',
  payload,
})
```

**reducer**

reducerï¼šæœ¬è´¨ä¸Šæ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œä½œç”¨æ˜¯æ ¹æ® action æ¥æ›´æ–°çŠ¶æ€ï¼Œæœ‰å¦‚ä¸‹ç‰¹ç‚¹ï¼š

- å‡½æ•°ç­¾åä¸ºï¼š(prevState, action) => newStateï¼›
- æ¥æ”¶ä¸Šä¸€æ¬¡çš„çŠ¶æ€å’Œ actionï¼Œæ ¹æ® action çš„ç±»å‹æ‰§è¡Œå¯¹åº”çš„æ“ä½œï¼Œæœ€ç»ˆè¿”å›æ–°çš„çŠ¶æ€ï¼›
- åŸåˆ™ï¼šä¸è¦åœ¨ reducer å‡½æ•°å†…éƒ¨ç›´æ¥ä¿®æ”¹ state

```jsx
export default function counter(state = 10, action) {
    // å¤„ç†å„ç§å„æ ·çš„ action
    switch (action.type) {
        case 'INCREMENT':
            return state + action.payload
        case 'DECREMENT':
            return state - action.payload
        default:
            // è®°å¾—è¦æœ‰é»˜è®¤è¿”å›çš„å¤„ç†
            return state
    }
}
```

**Store** 

Storeï¼šä»“åº“ï¼Œæ˜¯ Redux çš„æ ¸å¿ƒï¼Œè´Ÿè´£æ•´åˆ Action å’Œ Reducerï¼ŒåŸºæœ¬ç‰¹ç‚¹å¦‚ä¸‹ï¼š

- ä¸€ä¸ªåº”ç”¨åªæœ‰ä¸€ä¸ª Storeï¼›
- åˆ›å»ºï¼šconst store = createStore(reducer)ï¼›
- è·å–æ•°æ®ï¼šstore.getState()ï¼›
- æ›´æ–°æ•°æ®ï¼šstore.dispatch(action)ã€‚

**å…¶ä»– API**

- è®¢é˜…ï¼ˆç›‘å¬ï¼‰çŠ¶æ€å˜åŒ–ï¼šconst unSubscribe = store.subscribe(() => {})ï¼Œæ³¨æ„è¦å…ˆ è®¢é˜…ï¼Œåç»­çš„æ›´æ–°æ‰èƒ½è¢«è§‚æµ‹åˆ°ï¼›
- å–æ¶ˆè®¢é˜…çŠ¶æ€å˜åŒ–ï¼šunSubscribe()ã€‚

```jsx
// store: æ•´ä¸ªæ•°æ®çš„ä»“åº“ï¼Œè´Ÿè´£å…³è” reducer å’Œ actionï¼Œé€šè¿‡ store å¯¹è±¡å¯ä»¥ç»™ reducer åˆ†é… action
import { createStore } from 'redux'
import reducer from './reducers'
const store = createStore(reducer)
export default store
```

##### Reduxæ‰§è¡Œæµç¨‹

1. åªè¦åˆ›å»º storeï¼ŒRedux å†…éƒ¨å°±ä¼šè°ƒç”¨ä¸€æ¬¡ reducer
2. ç±»ä¼¼ï¼š`reducer(undefined,{type:"@@reJux/INITv.a.4.t.t.p })`
3. è¿™ä¸€æ¬¡è°ƒç”¨ reducer çš„ç›®çš„ï¼š**è·å–çŠ¶æ€çš„é»˜è®¤å€¼**
4. å› ä¸ºä¼ å…¥çš„çŠ¶æ€å€¼æ˜¯ undefined ï¼Œå¹¶ä¸”æ˜¯ä¸€ä¸ªéšæœºçš„çš„ action typeï¼Œæ‰€ä»¥ï¼Œ
5. - çŠ¶æ€å€¼æ˜¯undefinedï¼Œæ‰€ä»¥æˆ‘ä»¬è®¾ç½®çš„é»˜è®¤å€¼å°±ä¼šç”Ÿæ•ˆï¼Œæ¯”å¦‚ï¼Œæ­¤å¤„çš„ï¼š10;
   - å› ä¸ºæ˜¯ä¸€ä¸ªéšæœºçš„ action typeï¼Œæ‰€ä»¥ï¼Œredcer ä¸­ switch ä¸€å®šæ— æ³•å‘½ä¸­ï¼Œé‚£å°±ä¸€å®šä¼šèµ° defaultã€‚ä¹Ÿå°±æ˜¯ç›´æ¥è¿”å›äº†çŠ¶æ€çš„é»˜è®¤å€¼ï¼Œä¹Ÿå°±æ˜¯10ã€‚
6. Redux å†…éƒ¨æ‹¿åˆ°è¿™ä¸ªæ•°æ®(æ¯”å¦‚æ­¤å¤„çš„ 10)ä»¥åï¼Œå°±ç”¨è¿™ä¸ªæ•°æ®ä½œä¸ºäº† store ä¸­çš„æœ€æ–°çŠ¶æ€å€¼;
7. å› æ­¤ï¼Œå°†æ¥å½“æˆ‘ä»¬è°ƒç”¨æ–¹æ³•`store.getstate()`æ¥è·å– Redux çŠ¶æ€å€¼çš„æ—¶å€™ï¼Œæ‹¿åˆ°çš„å°±æ˜¯ 10 äº†ã€‚

##### ç‚¹å‡»äº‹ä»¶åçš„æ‰§è¡Œè¿‡ç¨‹

1. ç‚¹å‡»æŒ‰é’®ï¼Œæ´¾å‘åŠ¨ä½œstore.dispatch(action)ã€‚
2. åªè¦è§¦å‘actionï¼ŒReduxå°±ä¼šè‡ªåŠ¨è°ƒç”¨reducerï¼Œæ ¹æ®ä¸Šä¸€æ¬¡çš„çŠ¶æ€å’Œactionè®¡ç®—æ–°çš„çŠ¶æ€å¹¶è¿”å›ã€‚
3. reduceræ‰§è¡Œå®Œæ¯•åï¼Œå°†æœ€æ–°çš„çŠ¶æ€äº¤ç»™storeï¼Œstoreç”¨æœ€æ–°çš„çŠ¶æ€æ›¿æ¢æ—§çŠ¶æ€ï¼ŒçŠ¶æ€æ›´æ–°å®Œæ¯•ã€‚

##### 2ã€React-Redux

ä½¿ç”¨react-reduxå°±ä¸ä¼ ç»Ÿçš„ä½¿ç”¨æ–¹æ³•ä¸åŒäº†ã€‚

`ç•Œé¢æ¸²æŸ“main.jsx`

```jsx
import ReactDOM from "react-dom/client";
import App from "./App";
import store from "./store";
import { Provider } from "react-redux"

ReactDOM.createRoot(document.getElementById("root")).render(
    <Provider store={store}> 
        <App /> 
    </Provider>
)
```

**ä½¿ç”¨useSelectorè·å–çŠ¶æ€çš„å€¼**

**ä½¿ç”¨useDispatchæ¥å¾—åˆ°dispatchæ–¹æ³•**

ä½œç”¨:å¾—åˆ° dispatch æ¥è§¦å‘ action(è§¦å‘ action ä¼šæ‰§è¡Œreducerï¼Œreducer è´Ÿè´£æ•°æ®çš„ä¿®æ”¹ï¼Œreact-redux å†…éƒ¨ä¼šç›‘å¬æ•°æ®çš„å˜åŒ–è‡ªåŠ¨è¿›è¡Œè§†å›¾æ›´æ–°)ã€‚

```jsx
import React from 'react'
import { incremen, decremen } from './store/actions'
import { useDispatch, useSelector } from 'react-redux'

export default function App() {
  const count = useSelector((state) => state.counter)
  const dispatch = useDispatch()

  return (
    <div>
        <p>counter : { count } </p>
        <button onClick={ () => dispatch(incremen(1)) }>+1</button>
        <button onClick={ () => dispatch(decremen(2)) }>-2</button>
        <button onClick={ () => dispatch(decremen(5)) }>-5</button>
    </div>
  )
}
```

##### reducerçš„åˆå¹¶åˆ†ç¦»

éšç€é¡¹ç›®åŠŸèƒ½å˜å¾—è¶Šæ¥è¶Šå¤æ‚ï¼Œéœ€è¦ Redux ç®¡ç†çš„çŠ¶æ€ä¹Ÿä¼šè¶Šæ¥è¶Šå¤šï¼Œæ­¤æ—¶ï¼Œæœ‰ä¸¤ç§æ–¹å¼æ¥å¤„ç†çŠ¶æ€çš„æ›´æ–°:

- ä½¿ç”¨ä¸€ä¸ª reducerï¼Œå¤„ç†é¡¹ç›®ä¸­æ‰€æœ‰çŠ¶æ€;ã€‚
- ä½¿ç”¨å¤šä¸ª reducerï¼ŒæŒ‰ç…§é¡¹ç›®åŠŸèƒ½åˆ’åˆ†ï¼Œæ¯ä¸€ä¸ªreducer å¤„ç†è¯¥åŠŸèƒ½çš„çŠ¶æ€;ã€‚

**æ¨èä½¿ç”¨ç¬¬äºŒç§æ–¹æ¡ˆï¼Œæ¯ä¸ªreducer å¤„ç†å•ä¸€åŠŸèƒ½çš„çŠ¶æ€ï¼ŒèŒè´£æ›´æ˜ç¡®ã€‚**

**é—®é¢˜ï¼š**æ­¤æ—¶é¡¹ç›®ä¸­ä¼šæœ‰å¤šä¸ªreducerï¼Œä½†æ˜¯ store åªèƒ½æ¥æ”¶ä¸€ä¸ªreducerï¼Œå› æ­¤éœ€è¦å°†å¤šä¸ªreducer åˆå¹¶ä¸ºä¸€ä¸ªreducerï¼Œæ‰èƒ½ä¼ é€’ç»™ store ä½¿ç”¨ã€‚

**è§£å†³ï¼š**ä½¿ç”¨ Redux combineReducers({ counter: counterReducer, user: userReducer })å‡½æ•°ã€‚

**æ³¨æ„ï¼š**ç»„ä»¶ä¸­å†ä½¿ç”¨ counterï¼Œéœ€è¦const count = useSselector( (state) => state.counter )

æ¯ä¸ª reducer åº”è¯¥åªå…³æ³¨è‡ªå·±çš„æ•°æ®ï¼Œä¾‹å¦‚:

- ç™»å½•åŠŸèƒ½ï¼šloginReducerå¤„ç†çš„åªåº”è¯¥æ˜¯è·Ÿç™»å½•ç›¸å…³çš„çŠ¶æ€ã€‚
- ä¸ªäººèµ„æ–™ï¼šprofileReducerå¤„ç†çš„åªåº”è¯¥æ˜¯è·Ÿä¸ªäººèµ„æ–™ç›¸å…³çš„çŠ¶æ€ï¼Œ
- æ–‡ç« åˆ—è¡¨ã€æ–‡ç« è¯¦æƒ…ã€æ–‡ç« è¯„è®ºç­‰ã€‚

```jsx
import { combineReducers } from "redux"
import { INCREMENT, DECREMENT, UPDATENAME } from "./actionsTypes"

function counter(state=10, action) {
    switch (action.type) {
        case INCREMENT:
            return state + action.payload
        case DECREMENT:
            return state - action.payload
        default:
            return state
    }
}

function user(state={name : 'lisi', age : 18}, action) {
    switch (action.type) {
        case UPDATENAME:
            return {
                ...state,
                name: action.payload,
            }
        default:
            return state
    }
}

export default combineReducers( {
    counter,
    user,
})
```

##### actionTypes

**æ˜¯ä»€ä¹ˆï¼š**action å¯¹è±¡ä¸­çš„ type å±æ€§ã€‚

 Redux é¡¹ç›®ä¸­ï¼ŒåŒä¸€ä¸ª type ä¼šåœ¨ä¸åŒæ–‡ä»¶ä¸­å¤šæ¬¡è¢«ç”¨åˆ°ï¼Œæ¯”å¦‚ actions.jsã€reducers.js ç­‰ã€‚

**ç›®æ ‡ï¼š**é›†ä¸­å¤„ç† action typeï¼Œä¿æŒä¸€è‡´æ€§ï¼Œå®¹æ˜“ç»´æŠ¤ï¼

**å®ç°æ–¹å¼ï¼š**

1. åœ¨ store ç›®å½•ä¸­åˆ›å»º actionTypes.js æˆ– constants.js æ–‡ä»¶ã€‚
2. ä½¿ç”¨å¸¸é‡åˆ›å»º ActionType å¹¶å¯¼å‡ºã€‚
3. å‘½åæ¨è: æ¨¡å—_åŠ¨ä½œ
4. å“ªé‡Œéœ€è¦ç”¨åˆ°å°±æŒ‰éœ€å¯¼å…¥

`actionsTypes.js`

```js
export const INCREMENT = 'INCREMENT'
export const DECREMENT = 'DECREMENT'
export const UPDATENAME = 'UPDATENAME'
```

##### Ruduxçš„RTKå†™æ³•

**Reduxçš„è¿è¡Œæµç¨‹ï¼š**è§†å›¾ => dispatch => action => action çš„æ´¾å‘ä¼šä½¿ reducer æ‰§è¡Œ => reducer æ ¹æ® action.type å’Œ payload åŠ å·¥ state => state å˜åŒ– => è§†å›¾æ›´æ–°ã€‚

RTKå¯ä»¥é€šè¿‡åˆ‡ç‰‡äº§ç”Ÿ reducerã€action ç­‰ï¼Œ**ä¸€ä¸ªRTKå®è·µï¼šç‚¹å‡»æŒ‰é’®æ•°ä¼šå˜åŒ–**



#### React Router

##### äº†è§£SPA

- ğŸŒ³ SPAï¼šSingle Page Application å•é¡µé¢åº”ç”¨ç¨‹åºï¼Œæ•´ä¸ªåº”ç”¨ä¸­åªæœ‰ä¸€ä¸ªé¡µé¢ï¼ˆindex.htmlï¼‰ã€‚
- ğŸ¤” MPAï¼šMultiple Page Application å¤šé¡µé¢åº”ç”¨ç¨‹åºï¼Œæ•´ä¸ªåº”ç”¨ä¸­æœ‰å¾ˆå¤šä¸ªé¡µé¢ï¼ˆ*.htmlï¼‰ã€‚
- ğŸš€ ä¼˜åŠ¿ï¼šé¡µé¢å“åº”é€Ÿåº¦å¿«ï¼Œä½“éªŒå¥½ï¼ˆæ— åˆ·æ–°ï¼‰ï¼Œé™ä½äº†å¯¹æœåŠ¡å™¨çš„å‹åŠ›ï¼š
- ä¼ ç»Ÿçš„å¤šé¡µé¢åº”ç”¨ç¨‹åºï¼Œæ¯æ¬¡è¯·æ±‚æœåŠ¡å™¨è¿”å›çš„éƒ½æ˜¯ä¸€æ•´ä¸ªå®Œæ•´çš„é¡µé¢ï¼›
- å•é¡µé¢åº”ç”¨ç¨‹åºåªæœ‰ç¬¬ä¸€æ¬¡ä¼šåŠ è½½å®Œæ•´çš„é¡µé¢ï¼Œä»¥åæ¯æ¬¡è¯·æ±‚ä»…ä»…è·å–å¿…è¦çš„æ•°æ®ã€‚
- ğŸ©¹ ç¼ºç‚¹ï¼šä¸åˆ©äº SEO æœç´¢å¼•æ“ä¼˜åŒ–ï¼š
- å› ä¸ºçˆ¬è™«åªçˆ¬å– HTML é¡µé¢ä¸­çš„æ–‡æœ¬å†…å®¹ï¼Œä¸ä¼šæ‰§è¡Œ JS ä»£ç ï¼›
- å¯ä»¥é€šè¿‡ SSRï¼ˆæœåŠ¡ç«¯æ¸²æŸ“ Server Side Renderingï¼‰æ¥è§£å†³ SEO é—®é¢˜ï¼Œå³å…ˆåœ¨æœåŠ¡å™¨ç«¯æŠŠå†…å®¹æ¸²æŸ“å‡ºæ¥ï¼Œè¿”å›ç»™æµè§ˆå™¨çš„å°±æ˜¯çº¯ HTML å†…å®¹äº†ã€‚

##### å‰ç«¯è·¯ç”±

> ç°ä»£çš„å‰ç«¯åº”ç”¨å¤§å¤šéƒ½æ˜¯ SPAï¼Œä¹Ÿå°±æ˜¯åªæœ‰ä¸€ä¸ª HTML é¡µé¢çš„åº”ç”¨ç¨‹åºï¼Œå› ä¸ºå®ƒçš„ç”¨æˆ·ä½“éªŒæ›´å¥½ã€å¯¹æœåŠ¡å™¨çš„å‹åŠ›æ›´å°ï¼Œæ‰€ä»¥æ›´å—æ¬¢è¿ã€‚ä¸ºäº†æœ‰æ•ˆçš„ä½¿ç”¨å•ä¸ªé¡µé¢æ¥ç®¡ç†åŸæ¥å¤šé¡µé¢çš„åŠŸèƒ½ï¼Œå‰ç«¯è·¯ç”±åº”è¿è€Œç”Ÿï¼ŒåŠŸèƒ½ï¼šè®©ç”¨æˆ·ä»ä¸€ä¸ªè§†å›¾ï¼ˆé¡µé¢ï¼‰å¯¼èˆªåˆ°å¦ä¸€ä¸ªè§†å›¾ï¼ˆé¡µé¢ï¼‰ã€‚

å‰ç«¯è·¯ç”±æ˜¯ä¸€å¥—æ˜ å°„è§„åˆ™ ï¼Œæ˜¯ URL è·¯å¾„ ä¸ç»„ä»¶ä¹‹é—´çš„å¯¹åº”å…³ç³»ï¼Œä½¿ç”¨ React è·¯ç”±ç®€å•æ¥è¯´å°±æ˜¯ï¼š**é…ç½®è·¯å¾„å’Œç»„ä»¶ï¼ˆé…å¯¹ï¼‰**

##### React routerå†…å®¹

åœ¨ä¼ ç»Ÿç½‘ç«™ä¸­ï¼Œæµè§ˆå™¨ä» Web æœåŠ¡å™¨è¯·æ±‚æ–‡æ¡£ï¼Œä¸‹è½½CSS å’Œ JavaScriptèµ„æºï¼Œå¹¶å‘ˆç°ä»æœåŠ¡å™¨å‘é€çš„ HTMLã€‚å½“ç”¨æˆ·ç‚¹å‡»ä¸€ä¸ªé“¾æ¥æ—¶ï¼Œå®ƒä¼šé‡æ–°å¼€å§‹ä¸€ä¸ªæ–°é¡µé¢çš„è¿‡ç¨‹ã€‚

å®¢æˆ·ç«¯è·¯ç”±å…è®¸æ‚¨çš„åº”ç”¨é€šè¿‡å•å‡»é“¾æ¥æ¥æ›´æ–° URLï¼Œè€Œæ— éœ€ä»æœåŠ¡å™¨å†æ¬¡è¯·æ±‚å¦ä¸€ä¸ªæ–‡æ¡£ã€‚ç›¸åï¼Œæ‚¨çš„åº”ç”¨å¯ä»¥ç«‹å³å‘ˆç°ä¸€äº›æ–°çš„ UIï¼Œå¹¶å‘å‡ºæ•°æ®è¯·æ±‚ï¼Œä»¥ä½¿ç”¨æ–°ä¿¡æ¯æ›´æ–°é¡µé¢ã€‚

è¿™æ ·å¯ä»¥æ›´å¿«åœ°è·å¾—ç”¨æˆ·ä½“éªŒï¼Œå› ä¸ºæµè§ˆå™¨ä¸éœ€è¦è¯·æ±‚å…¨æ–°çš„æ–‡æ¡£æˆ–é‡æ–°ç”³è¯·ä¸‹ä¸€é¡µçš„ CSS å’Œ JavaScript èµ„æºã€‚å®ƒè¿˜æ”¯æŒæ›´åŠ¨æ€çš„ç”¨æˆ·ä½“éªŒï¼ŒåŒ…æ‹¬åŠ¨ç”»ç­‰ã€‚

å®¢æˆ·ç«¯è·¯ç”±æ˜¯é€šè¿‡åˆ›å»ºä¸€ä¸ªRouterå¹¶é“¾æ¥/æäº¤åˆ°å¸¦æœ‰Linkå’Œ<Form>é¡µé¢æ¥å¯ç”¨çš„

è®©æˆ‘ä»¬å¼€å§‹ä¸€ä¸ªå®æ“

é¦–å…ˆéœ€è¦æ–°å»ºä¸€ä¸ªæ–°çš„reacté¡¹ç›®ï¼Œå¹¶ä¸”å®‰è£…äº† React Router å®‰è£…å‘½ä»¤ï¼š`npm install react-router-dom`

React Router Dom æ˜¯ä¸€ä¸ªå¼ºå¤§çš„ React åº”ç”¨ç¨‹åºè·¯ç”±åº“ã€‚å®ƒå…è®¸æ‚¨åœ¨åº”ç”¨ç¨‹åºä¸­åˆ›å»ºå¤šä¸ªè·¯ç”±ï¼Œå¹¶æ ¹æ®å½“å‰ URL å‘ˆç°ä¸åŒçš„ç»„ä»¶ã€‚è¿™å¯¹äºåˆ›å»º[**å•é¡µåº”ç”¨ç¨‹åº ï¼ˆSPAï¼‰ è‡³å…³é‡è¦ï¼Œåœ¨è¿™äº›åº”ç”¨ç¨‹åºä¸­**](https://www.dhiwise.com/post/reactjs-for-single-page-application-development)ï¼Œæ‰€æœ‰è·¯ç”±éƒ½åœ¨å®¢æˆ·ç«¯å¤„ç†ã€‚

ä»¥ä¸‹æ˜¯ React Router Dom æä¾›çš„ä¸€äº›æ ¸å¿ƒç»„ä»¶ï¼š

1. **BrowserRouter**ï¼šè¿™æ˜¯ä¸€ä¸ªåŒ…è£…å™¨ç»„ä»¶ï¼Œåº”åœ¨åº”ç”¨ç¨‹åºçš„é¡¶å±‚ä½¿ç”¨ä¸€æ¬¡ã€‚å®ƒä½¿ç”¨ HTML5 å†å²è®°å½• API æ¥ä½¿ UI ä¸ URL ä¿æŒåŒæ­¥ã€‚
2. **Router**ï¼šè¿™ä¸ªç»„ä»¶æ˜¯ React Router çš„æ ¸å¿ƒã€‚å®ƒå…è®¸æ‚¨æ ¹æ®å½“å‰ URL å‘ˆç°ä¸åŒçš„ç»„ä»¶ã€‚æ‚¨å¯ä»¥ä½¿ç”¨ path å±æ€§æŒ‡å®šè·¯ç”±çš„è·¯å¾„ï¼Œå¹¶ä½¿ç”¨ component prop æŒ‡å®šè¦æ¸²æŸ“çš„ç»„ä»¶ã€‚
3. **Switch**ï¼šæ­¤ç»„ä»¶ç”¨äºä»…å‘ˆç°ä¸å½“å‰ä½ç½®åŒ¹é…çš„ç¬¬ä¸€ä¸ªè·¯ç”±æˆ–é‡å®šå‘ã€‚
4. **Link**ï¼šæ­¤ç»„ä»¶å…è®¸æ‚¨åœ¨åº”ç”¨ç¨‹åºä¸­åˆ›å»ºé“¾æ¥ã€‚å•å‡»é“¾æ¥æ—¶ï¼ŒURL å°†æ›´æ–°ï¼Œå¹¶å‘ˆç°ä¸æ–° URL å¯¹åº”çš„ç»„ä»¶ã€‚
5. **Redirect**ï¼šæ­¤ç»„ä»¶å…è®¸æ‚¨é‡å®šå‘åˆ°ä¸åŒçš„è·¯ç”±ã€‚

è®©æˆ‘ä»¬çœ‹çœ‹å¦‚ä½•åœ¨æˆ‘ä»¬çš„ React åº”ç”¨ç¨‹åºä¸­ä½¿ç”¨è¿™äº›ç»„ä»¶ã€‚ä¸‹é¢æ˜¯ä¸€ä¸ªç®€å•çš„ä»£ç ç‰‡æ®µï¼š

```jsx
import * as React from "react";
import { createRoot } from "react-dom/client";
import {
  createBrowserRouter,
  RouterProvider,
  Route,
  Link,
} from "react-router-dom";

const router = createBrowserRouter([
  {
    path: "/",
    element: (
      <div>
        <h1>Hello World</h1>
        <Link to="about">About Us</Link>
      </div>
    ),
  },
  {
    path: "about",
    element: <div>About</div>,
  },
]);

createRoot(document.getElementById("root")).render(
  <RouterProvider router={router} />
);
```

